desc "Import players data from JSON dumps"
task :import_players => :environment do
  Dir.entries("#{Rails.root}/dumps/players").each do |f|
    if f.end_with?('.json')
      json = JSON.parse(File.open("#{Rails.root}/dumps/players/#{f}").read)
      json['items'].each do |p|
        Player.create(
          "first_name" => p['firstName'],
          "last_name" => p['lastName'],
          "common_name" => p['commonName'],
          "league_id" => p['league']['id'],
          "nation_id" => p['nation']['id'],
          "club_id" => p['club']['id'],
          "position" => p['position'],
          "play_style" => p['playStyle'],
          "height" => p['height'],
          "weight" => p['weight'],
          "birthdate" => p['birthdate'],
          "age" => p['age'],
          "acceleration" => p['acceleration'],
          "aggression" => p['aggression'],
          "agility" => p['agility'],
          "balance" => p['balance'],
          "ballcontrol" => p['ballcontrol'],
          "foot" => p['foot'],
          "skillMoves" => p['skillMoves'],
          "crossing" => p['crossing'],
          "curve" => p['curve'],
          "dribbling" => p['dribbling'],
          "finishing" => p['finishing'],
          "freekickaccuracy" => p['freekickaccuracy'],
          "gkdiving" => p['gkdiving'],
          "gkhandling" => p['gkhandling'],
          "gkkicking" => p['gkkicking'],
          "gkpositioning" => p['gkpositioning'],
          "gkreflexes" => p['gkreflexes'],
          "headingaccuracy" => p['headingaccuracy'],
          "interceptions" => p['interceptions'],
          "jumping" => p['jumping'],
          "longpassing" => p['longpassing'],
          "longshots" => p['longshots'],
          "marking" => p['marking'],
          "penalties" => p['penalties'],
          "positioning" => p['positioning'],
          "potential" => p['potential'],
          "reactions" => p['reactions'],
          "shortpassing" => p['shortpassing'],
          "shotpower" => p['shotpower'],
          "slidingtackle" => p['slidingtackle'],
          "sprintspeed" => p['sprintspeed'],
          "standingtackle" => p['standingtackle'],
          "stamina" => p['stamina'],
          "strength" => p['strength'],
          "vision" => p['vision'],
          "volleys" => p['volleys'],
          "weak_foot" => p['weakFoot'],
          "traits" => p['traits'],
          "specialities" => p['specialities'],
          "atk_work_rate" => p['atkWorkRate'],
          "def_work_rate" => p['defWorkRate'],
          "player_type" => p['playerType'],
          "attribute_1" => p['attributes'][0]['value'],
          "attribute_2" => p['attributes'][1]['value'],
          "attribute_3" => p['attributes'][2]['value'],
          "attribute_4" => p['attributes'][3]['value'],
          "attribute_5" => p['attributes'][4]['value'],
          "attribute_6" => p['attributes'][5]['value'],
          "name" => p['name'],
          "quality" => p['quality'],
          "color" => p['color'],
          "is_gk" => p['isGK'],
          "position_full" => p['positionFull'],
          "is_special_type" => p['isSpecialType'],
          "item_type" => p['itemType'],
          "fifa_id" => p['id'],
          "base_id" => p['baseId'],
          "rating" => p['rating']
        )
      end
      puts f
    end
  end
end
